(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["activityconfiguration"],{"0c5f":function(t,e,a){},"159b":function(t,e,a){var i=a("da84"),o=a("fdbc"),n=a("17c2"),l=a("9112");for(var r in o){var c=i[r],s=c&&c.prototype;if(s&&s.forEach!==n)try{l(s,"forEach",n)}catch(d){s.forEach=n}}},"17c2":function(t,e,a){"use strict";var i=a("b727").forEach,o=a("a640"),n=o("forEach");t.exports=n?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},2120:function(t,e,a){"use strict";a("8eaa")},"2ffa":function(t,e,a){"use strict";a("5dd2")},"32c2":function(t,e,a){"use strict";a("efbf")},"5dd2":function(t,e,a){},6997:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("div",{staticClass:"rule base_rule"},[a("div",{staticClass:"title"},[t._v("商品")]),a("div",{staticClass:"base_rule_input"},[a("el-form",{ref:"form",attrs:{model:t.commodity,"label-width":"100px",rules:t.rules,"label-position":"right"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{model:{value:t.commodity.name,callback:function(e){t.$set(t.commodity,"name",e)},expression:"commodity.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品单价",prop:"price"}},[a("el-input",{model:{value:t.commodity.price,callback:function(e){t.$set(t.commodity,"price",e)},expression:"commodity.price"}})],1)],1)],1)],1)],1)]),a("div",{staticClass:"rule collection_rule"},[a("div",{staticClass:"flex-row-between"},[a("div",{staticClass:"title"},[t._v("添加记录")]),a("div",{staticClass:"elIcon",on:{click:t.addRecords}},[a("i",{staticClass:"el-icon-circle-plus-outline"})])]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.recordsTable,border:"","row-style":{height:"25px"},"cell-style":{padding:"2px 0"},"header-cell-style":{background:"#ffffff",padding:"4px 0"}}},[a("el-table-column",{attrs:{prop:"time",label:"日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"选择日期",format:"yyyy - MM - dd"},model:{value:e.row.time,callback:function(a){t.$set(e.row,"time",a)},expression:"scope.row.time"}})]}}])}),a("el-table-column",{attrs:{prop:"number",label:"数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini"},on:{change:function(a){return t.countMoney(e.$index,e.row)}},model:{value:e.row.number,callback:function(a){t.$set(e.row,"number",t._n(a))},expression:"scope.row.number"}})]}}])}),a("el-table-column",{attrs:{prop:"money",label:"金额",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",disabled:!0},model:{value:e.row.money,callback:function(a){t.$set(e.row,"money",a)},expression:"scope.row.money"}}),a("span",{staticStyle:{"margin-left":".1rem"}},[t._v("元")])]}}])}),a("el-table-column",{attrs:{prop:"operating",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"delBtn"},[a("el-button",{attrs:{size:"mini",disabled:t.disabledRule},on:{click:function(a){return t.deleteRecords(e.$index)}}},[t._v("删除")])],1)]}}])})],1)],1)]),a("div",{staticClass:"rule operate_btn"},[a("div",{staticClass:"operate_save"},[a("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",size:"mini"},on:{click:t.saveActivity}},[t._v(" 保存 ")])],1)])])},o=[],n=(a("a434"),{data:function(){var t=function(t,e,a){var i=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/;e?i.test(e)?a():a(new Error("请输入有效数字!")):a(new Error("请输入商品单价!"))};return{commodity:{name:"",price:""},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],price:[{validator:t,trigger:"blur"},{required:!0,message:"请输入商品名称",trigger:"blur"}]},recordsTable:[{time:new Date,money:0}],disabledRule:!0}},methods:{onSubmit:function(){console.log("submit!")},addRecords:function(){this.recordsTable.push({time:new Date,money:0}),this.recordsTable.length>=2&&(this.disabledRule=!1)},deleteRecords:function(t){this.recordsTable.splice(t,1),1===this.collectionRuleTable.length&&(this.disabledRule=!0)},countMoney:function(t,e){return this.$set(e,"money",parseInt(e.number,10)*this.commodity.price),e},saveActivity:function(){console.log("保存")}}}),l=n,r=(a("32c2"),a("2877")),c=Object(r["a"])(l,i,o,!1,null,"5d79a64d",null);e["default"]=c.exports},"6b78":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box",staticStyle:{background:"#ffffff"}},[a("div",{staticClass:"activity_select"},[a("div",{staticClass:"activity_condition"},[a("el-form",{ref:"form",staticClass:"form_select flex-row-start",attrs:{model:t.commodity,"label-width":"100px","label-position":"right",size:"mini"}},[a("el-form-item",{staticClass:"form_acname",attrs:{label:"商品名称:"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.commodity.name,callback:function(e){t.$set(t.commodity,"name",e)},expression:"commodity.name"}})],1),a("el-form-item",{staticClass:"form_time",attrs:{label:"起始时间段:"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.commodity.startDate,callback:function(e){t.$set(t.commodity,"startDate",e)},expression:"commodity.startDate"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("~")]),a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.commodity.endDate,callback:function(e){t.$set(t.commodity,"endDate",e)},expression:"commodity.endDate"}})],1)],1),a("el-form-item",[a("el-button",{staticClass:"query",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getdataActivity("query")}}},[t._v("查询")]),a("el-button",{staticClass:"info",staticStyle:{"margin-left":"50px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:t.addType}},[t._v("新增单品")]),a("el-button",{staticClass:"down_load",attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.downExcel}},[t._v("导出")])],1)],1)],1)]),a("commodity-index",{attrs:{loading:t.loading,data:t.tableData}})],1)])},o=[],n=a("6c6e"),l=a("c58e"),r={components:{CommodityIndex:l["a"]},name:"Commidity",data:function(){return{commodity:{name:"",startDate:"",endDate:""},tableData:{},loading:!1,labelWidth:"80px",currentPage:1}},methods:{getdata:function(){var t=this;this.loading=!0,Object(n["a"])().then((function(e){t.loading=!1,t.tableData=e.data.list})).catch((function(){t.loading=!1}))},getdataActivity:function(){this.getdata(this.commodity)},downExcel:function(){console.log("导出")},addType:function(){this.$router.push({path:"/ComConfig"})}},mounted:function(){this.getdata({})}},c=r,s=(a("2120"),a("2877")),d=Object(s["a"])(c,i,o,!1,null,"7561f2b8",null);e["default"]=d.exports},"6c6e":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("bc3a"),o=a.n(i),n=(a("b775"),function(){return o.a.get("/mock/index.json")})},8418:function(t,e,a){"use strict";var i=a("c04e"),o=a("9bf2"),n=a("5c6c");t.exports=function(t,e,a){var l=i(e);l in t?o.f(t,l,n(0,a)):t[l]=a}},"8eaa":function(t,e,a){},"99af":function(t,e,a){"use strict";var i=a("23e7"),o=a("d039"),n=a("e8b5"),l=a("861d"),r=a("7b0b"),c=a("50c4"),s=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),f=a("2d00"),p=m("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",y=f>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),h=u("concat"),v=function(t){if(!l(t))return!1;var e=t[p];return void 0!==e?!!e:n(t)},w=!y||!h;i({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,i,o,n,l=r(this),u=d(l,0),m=0;for(e=-1,i=arguments.length;e<i;e++)if(n=-1===e?l:arguments[e],v(n)){if(o=c(n.length),m+o>b)throw TypeError(g);for(a=0;a<o;a++,m++)a in n&&s(u,m,n[a])}else{if(m>=b)throw TypeError(g);s(u,m++,n)}return u.length=m,u}})},a434:function(t,e,a){"use strict";var i=a("23e7"),o=a("23cb"),n=a("a691"),l=a("50c4"),r=a("7b0b"),c=a("65f0"),s=a("8418"),d=a("1dde"),u=d("splice"),m=Math.max,f=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var a,i,d,u,g,y,h=r(this),v=l(h.length),w=o(t,v),x=arguments.length;if(0===x?a=i=0:1===x?(a=0,i=v-w):(a=x-2,i=f(m(n(e),0),v-w)),v+a-i>p)throw TypeError(b);for(d=c(h,i),u=0;u<i;u++)g=w+u,g in h&&s(d,u,h[g]);if(d.length=i,a<i){for(u=w;u<v-i;u++)g=u+i,y=u+a,g in h?h[y]=h[g]:delete h[y];for(u=v;u>v-i+a;u--)delete h[u-1]}else if(a>i)for(u=v-i;u>w;u--)g=u+i-1,y=u+a-1,g in h?h[y]=h[g]:delete h[y];for(u=0;u<a;u++)h[u+w]=arguments[u+2];return h.length=v-i+a,d}})},a640:function(t,e,a){"use strict";var i=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},b04c:function(t,e,a){"use strict";a("0c5f")},b0c0:function(t,e,a){var i=a("83ab"),o=a("9bf2").f,n=Function.prototype,l=n.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in n)&&o(n,c,{configurable:!0,get:function(){try{return l.call(this).match(r)[1]}catch(t){return""}}})},b6a5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box",staticStyle:{background:"#ffffff"}},[a("div",{staticClass:"activity_select"},[a("div",{staticClass:"activity_condition"},[a("el-form",{ref:"form",staticClass:"form_select flex-row-start",attrs:{model:t.commodity,"label-width":"100px","label-position":"right",size:"mini"}},[a("el-form-item",{staticClass:"form_acname",attrs:{label:"商品名称:"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.commodity.name,callback:function(e){t.$set(t.commodity,"name",e)},expression:"commodity.name"}})],1),a("el-form-item",{staticClass:"form_time",attrs:{label:"起始时间段:"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.commodity.startDate,callback:function(e){t.$set(t.commodity,"startDate",e)},expression:"commodity.startDate"}})],1),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("~")]),a("el-col",{attrs:{span:10}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.commodity.endDate,callback:function(e){t.$set(t.commodity,"endDate",e)},expression:"commodity.endDate"}})],1)],1),a("el-form-item",[a("el-button",{staticClass:"query",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.getdataActivity("query")}}},[t._v("查询")]),a("el-button",{staticClass:"info",staticStyle:{"margin-left":"50px"},attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:t.addType}},[t._v("新增单品")]),a("el-button",{staticClass:"down_load",attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.downExcel}},[t._v("导出")])],1)],1)],1)]),a("commodity-index",{attrs:{loading:t.loading,data:t.tableData}})],1)])},o=[],n=a("6c6e"),l=a("c58e"),r={components:{CommodityIndex:l["a"]},name:"FrmLoss",data:function(){return{commodity:{name:"",startDate:"",endDate:""},tableData:{},loading:!1,currentPage:1}},methods:{getdata:function(){var t=this;this.loading=!0,Object(n["a"])().then((function(e){t.loading=!1,t.tableData=e.data.loss})).catch((function(){t.loading=!1}))},getdataActivity:function(){this.getdata(this.commodity)},downExcel:function(){console.log("导出")},addType:function(){this.$router.push({path:"/ComConfig"})}},mounted:function(){this.getdata({})}},c=r,s=(a("2ffa"),a("2877")),d=Object(s["a"])(c,i,o,!1,null,"56826099",null);e["default"]=d.exports},c58e:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("div",{staticClass:"activity_table"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"activity_table_data"},[a("el-table",{ref:"table",staticStyle:{width:"100%","margin-top":"10px"},attrs:{height:"450",data:t.tableData,border:"","show-summary":"","row-style":{height:"30px"},"cell-style":{padding:"4px 0"},"header-cell-style":{background:"#f5f5f5",padding:"8px 0"}}},[a("el-table-column",{attrs:{type:"expand",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{attrs:{data:e.row.list,border:!0,"row-style":{background:"#f5f5f5"},"header-cell-style":{background:"#f5f5f5"}}},[a("el-table-column",{attrs:{prop:"time",label:"时间",align:"center"}}),a("el-table-column",{attrs:{prop:"number",label:"数量",align:"center"}}),a("el-table-column",{attrs:{prop:"money",label:"金额",align:"center"}}),a("el-table-column",{attrs:{prop:"operating",label:"操作",align:"center"}},[[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(a){return t.deleteData(e.row)}}},[t._v("删除")])]],2)],1),a("div",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)]}}])}),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"商品ID",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"起止时间",width:"240",align:"center"}}),a("el-table-column",{attrs:{prop:"price",label:"单价",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.ifChange?a("el-input",{attrs:{size:"mini"},on:{change:function(a){return t.changePrice(e.$index,e.row)}},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}}):a("span",[t._v(t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"amount",label:"总金额",align:"center"}}),a("el-table-column",{attrs:{prop:"operating",label:"操作",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.agreeChange(e.$index,e.row)}}},[t._v("修改单价")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.dialogChange(e.row)}}},[t._v("新增记录")])]}}])})],1)],1)]),a("el-dialog",{attrs:{visible:t.showDialog,width:"40%",center:"",title:"新增"},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{attrs:{model:t.dialogForm}},[a("el-form-item",{attrs:{label:"商品名称:","label-width":t.labelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.dialogForm.name,callback:function(e){t.$set(t.dialogForm,"name",e)},expression:"dialogForm.name"}})],1),a("el-form-item",{attrs:{label:"日期:","label-width":t.labelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy - MM - dd"},model:{value:t.dialogForm.time,callback:function(e){t.$set(t.dialogForm,"time",e)},expression:"dialogForm.time"}})],1),a("el-form-item",{attrs:{label:"数量:","label-width":t.labelWidth}},[a("el-input",{attrs:{autocomplete:"off"},on:{input:t.caculateMoney},model:{value:t.dialogForm.number,callback:function(e){t.$set(t.dialogForm,"number",e)},expression:"dialogForm.number"}})],1),a("el-form-item",{attrs:{label:"单价:","label-width":t.labelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.dialogForm.price,callback:function(e){t.$set(t.dialogForm,"price",e)},expression:"dialogForm.price"}})],1),a("el-form-item",{attrs:{label:"金额:","label-width":t.labelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.dialogForm.money,callback:function(e){t.$set(t.dialogForm,"money",e)},expression:"dialogForm.money"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("保存")])],1)],1)],1)])},o=[],n=(a("b0c0"),a("159b"),a("99af"),{name:"CommodityIndex",props:{loading:{type:Boolean,default:!1},data:{type:Object,default:function(){}}},data:function(){return{showDialog:!1,tableData:[],dialogForm:{name:"",price:"",number:"",money:"",time:new Date},labelWidth:"80px",currentPage:1,pageSize:10,total:0}},methods:{caculateMoney:function(t){this.dialogForm.money=parseInt(this.dialogForm.price,10)*parseInt(t,10)},dialogChange:function(t){this.showDialog=!0,this.dialogForm.name=t.name,this.dialogForm.price=t.price,console.log(t,"1111111")},deleteData:function(t){console.log(t,"222222222"),this.$confirm("确定删除该条数据？",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then((function(){console.log("删除操作请求")}))},changePrice:function(t,e){var a=this,i=e;this.$confirm("修改单价后该商品对应记录金额会改变，是否确定修改？",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0}).then((function(){var t=0;return i.list.forEach((function(e){t+=parseInt(e.number,10),a.$set(e,"money",parseInt(i.price,10)*parseInt(e.number,10))})),i.amount=t*parseInt(i.price,10),i.ifChange=!1,i})),console.log(t,e,"changePrice")},agreeChange:function(t,e){var a=e;a.ifChange=!0,this.$set(this.tableData,t,a)},assignData:function(t){console.log("这是mock数据：",t),t.total>=0&&(this.total=t.total),t.allList?(this.tableData=t.allList,this.tableData.forEach((function(t){var e=t;return e.date="".concat(e.startDate,"~").concat(e.endDate),e.ifChange=!1,e}))):this.tableData=[]},handleSizeChange:function(t){this.pageSize=t,this.getdataActivity()},handleCurrentChange:function(t){this.currentPage=t,this.getdataActivity()},addType:function(){this.$router.push({path:"/ComConfig"})}},updated:function(){var t=this;this.$nextTick((function(){t.$refs.table.doLayout()}))},watch:{data:function(t){this.assignData(t)}}}),l=n,r=(a("b04c"),a("2877")),c=Object(r["a"])(l,i,o,!1,null,"221a6af8",null);e["a"]=c.exports},efbf:function(t,e,a){}}]);